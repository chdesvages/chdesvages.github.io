%!TEX root = book.tex 
% chktex-file 1
% chktex-file 3
% chktex-file 8
% chktex-file 12
% chktex-file 18
% chktex-file 24
% chktex-file 35 
% chktex-file 42

%-------------------------------------------------------------------%
%-------------------------------------------------------------------%
\section{Ultrafilters}%
\label{sec:ultrafilters}
%-------------------------------------------------------------------%
%-------------------------------------------------------------------%

%-------------------------------------------------------------------%
\subsection{Ultrafilters on sets}%
\label{sub:ultrafilters_on_sets}
%-------------------------------------------------------------------%

Ultrafilters on sets are masters of disguise.
They manage to appear exceptionally natural
in several different outfits:
\begin{enumerate}
	\item Most simply, an ultrafilter on a set $ S $
		provides an integral that assigns,
		to a map $ f $ from $ S $ to a finite set $ I $,
		an element $ \int f \ d\mu \in I $.
	\item In functional analysis, one is used to the idea
		that the data of an integral operator
		for functions on a suitable space
		is equivalent to
		the data of a measure of that space.
		Accordingly, an ultrafilter on $ S $ can be regarded
		as a probability measure $ \mu $ on $ S $,
		for which every subset is
		either measure $ 0 $ (\enquote{thin}) or
		measure $ 1 $ (\enquote{thick}).
	\item 
\end{enumerate}

\begin{nul}
	Recall that $ \Set_0 $ denotes the category of finite sets.
\end{nul}

\begin{definition}%
	\label{dfn:ultrafilter}
	Let $ S $ be a set.
	We shall write $ S_+ \coloneq S \sqcup \{ \infty \} $.
	An \defn{ultrafilter} is a section of the forgetful functor
	\[ S_+/\Set_0 \to S/\Set_0 \period \]
\end{definition}

\begin{nul}
	Let $ i \colon \Set_0 \inclusion \Set^V $
	denote the inclusion.
	The forgetful functor $ S/\Set_0 \to \Set_0 $
	is a cocartesian fibration classified by
	the restriction $ \yo^S \circ i $ of the functor
	corepresented by $ S $.
	Consequently, an ultrafilter on $ S $ is
	tantamount to 
	a natural transformation
	\[ \yo^S \circ i \to i \period \]
\end{nul}


\begin{notation}
	Let $ S $ be a set, and
	let $ \mu $ be an ultrafilter on $ S $.
	We find it expressive to write
	\[ \int_S (\cdot) \ d\mu \]
	for the functor $ S/\Set_0 \to S_+/\Set_0 $. 
	So if $ I $ is a finite set,
	and if $ f \colon S \to I $ is a map,
	then this natural transformation
	specifies an element of $ I $ that we shall write as
	\[
		\int_S f \ d\mu
		\text{\quad or \quad}
		\int_{s \in S} f(s) \ d\mu
		\period
	\]
	The naturality condition ensures that
	for a map $ \phi \colon I \to J $ of finite sets,
	we have
	\[
		\phi \left( \int_S f \ d\mu \right) = 
		\int_S \phi \circ f \ d\mu \period
	\]
\end{notation}

\begin{eg}
	Let $ S $ be a set, and let $ s \in S $ be an element.
	The \defn{principal ultrafilter} $ \delta_s $ is
	then defined so that
	\[ \int_S f \ d \delta_s = f(s) \period \]
	By Yoneda,
	every ultrafilter on a finite set is principal,
	but as we shall see,
	infinite sets have ultrafilters that are not principal.
\end{eg}

\begin{notation}
	If $ S $ is a set, then
	we write $ \beta(S) $ for the set
	of ultrafilters on $ S $:
	\[ \beta(S) \coloneq \Map(\yo^S \circ i, i) \period \]

	If $ \alpha $ is an ordinal number such that
	$ S \in \Set_{\alpha} $, then $ \yo^S $
	takes values in $ \Set_{\alpha} $,
	so $ \beta(S) \in \Set_{\alpha} $ as well.
	Thus $ \beta $ defines a functor
	$ \Set_{\alpha} \to \Set_{\alpha} $.

	The formation of the principal ultrafilter
	defines a natural transformation
	$ \delta \colon \id \to \beta $.
\end{notation}

\begin{nul}
	Let $ \phi \colon S \to T $ be a map,
	and let $ \mu $ be an ultrafilter on $ S $.
	The induced ultrafilter $ \phi_{\ast}\mu $ on $ T $
	is then given by the change-of-variables formula:
	\[
		\int_T f \ d (\phi_{\ast}\mu) =
		\int_S (f \circ \phi) \ d \mu \period
	\]
\end{nul}

\begin{nul}
	Let $ S $ be a set.
	We can express $ \beta(S) $ as an end:
	\[
		\beta(S) =
		\sqint_{I \in \Set_0} I^{I^S} \period
	\]
	(Here we are writing $ Y^X $ for the set $ \Map(X,Y) $
	of maps $ X \to Y $.)
	Hence for an ordinal number $ \alpha $,
	the functor $ \beta \colon \Set_{\alpha} \to \Set_{\alpha} $
	is the right Kan extension of
	$ i \colon \Set_0 \inclusion \Set_{\alpha} $
	along itself.
	Equivalently, we can express $ \beta(S) $
	as the limit over all finite sets
	to which $ S $ maps:
	\[ \beta(S) = \lim_{I \in (\Set_0)_{S/}} I \period \]
\end{nul}

Thus far, there is nothing to guarantee that we aren't
simply speaking about the identity functor;
we have not seen an example of an ultrafilter
that is not principal.
It turns out that an infinite set $ S $ has plenty of
non-principal ultrafilters.
To prove the existence of these,
let us look at a more conventional way
of describing ultrafilters.

The connection between
the definition of ultrafilters in \ref{dfn:ultrafilter} and
their more conventional definition
is a primitive variant of
the Riesz−Markov−Kakutani Representation Theorem.
If an ultrafilter on a set $ S $ is
a functional $ f \mapsto \int_S f \ d \mu $,
then we can look for the \emph{measure} $ \mu $ on $ S $
relative to which this functional is the integral.
As in the functional analysis setting,
one connects these two perspectives through
characteristic functions.

\begin{definition}
	Let $ S $ be a set, and
	let $ T \subseteq S$ be a subset.
	The \defn{characteristic map}
	$ \chi_T \colon S \to \{ 0,1 \}$
	is defined by the formula
	\[
		\chi_T(s) =
		\begin{cases}
			1 & \text{if } s \in T \semicolon \\
			0 & \text{if } s \notin T \period
		\end{cases}
	\]
	
	Now let $ \mu $ be an ultrafilter on $ S $.
	Let us write
	\[
		\mu(T) \coloneq
		\int_S \chi_T \ d \mu \in
		\{ 0,1 \} \period
	\]
	
	We shall say that $ T $ is \defn{$ \mu $-thick}
	if and only if $\mu(T) = 1$.
	Accordingly, we say that $ T $ is \defn{$ \mu $-thin}
	if and only if $ \mu(T) = 0 $.
	We let $ \mathscr{F}_{\mu} \subseteq P(S) $ denote
	the subset consisting of all $ \mu $-thick subsets of $ S $.
\end{definition}

\begin{eg}
	For an element $ s \in S$,
	the principal ultrafilter $ \delta_s $ is
	the unique ultrafilter relative to which
	the singleton $ \{ s \} $ is thick.
	That is, $ \{ s \} \in \mathscr{F}_{\mu} $
	if and only if $ \mu = \delta_s $.
\end{eg}

\begin{eg}
	Let $ \phi \colon S \to T $ be a map,
	let $ \mu \in \beta(S) $ be an ultrafilter, and
	let $ U \subseteq T $ be a subset.
	One has
	\[ (\phi_{\ast} \mu)(U) = \mu (\phi^{-1}(U)) \period \]
	Hence $ U $ is $ \phi_{\ast} \mu $-thick
	if and only if $ \phi^{-1} U $ is $ \mu $-thick.
	In other words,
	\[
		\mathscr{F}_{\phi_{\ast} \mu} =
		(\phi^{-1})^{-1} \mathscr{F}_{\mu} \period
	\]
\end{eg}

The proof of the following is routine.

\begin{lemma}
	Let $ S $ be a set, and
	let $ \mu \in \beta(S) $ be an ultrafilter.
	\begin{enumerate}
		\item The set $ S $ is $ \mu $-thick.
		\item Supersets of $ \mu $-thick sets are $ \mu $-thick.
		\item The intersection of two $ \mu $-thick sets
			is $ \mu $-thick.
		\item The complement of a $ \mu $-thick set
			is $ \mu $-thin.
	\end{enumerate}
\end{lemma}

\begin{eg}%
	\label{eg:thicknesscriterion}
	Let $ \mu $ be an ultrafilter on $ S $.
	A subset $ T \subseteq S $ is $ \mu $-thick if and only if
	it intersects any $ \mu $-thick subset of $ S $.
	One direction follows from the fact that $ \mu $-thick subsets
	are closed under finite intersection.
	In the other direction, if $ T $ intersects
	every $ \mu $-thick subset,
	then $ S \setminus T $ cannot be $ \mu $-thick, so
	$ T $ must be.
\end{eg}

\begin{definition}
	Let $ S $ be a set.
	A \defn{finitely additive measure} on $ S $
	is a collection $ \mathscr{F} \subseteq P(S) $
	of subsets of $ S $
	(the subsets of positive measure)
	such that for every partition
	\[
		S = S_1 \coproduct \cdots \coproduct S_n \comma
	\]
	there is a unique $ i $ such that $ S_i \in \mathscr{F} $.

	Equivalently, $ \mathscr{F} \subseteq P(S) $ is
	a finitely additive measure
	if and only the following conditions obtain.
	\begin{enumerate}
		\item $ S \in \mathscr{F} $.
		\item If $ U \subseteq T \subseteq S $ and if
			$ U \in \mathscr{F} $, then
			$ T \in \mathscr{F} $.
		\item If $ T, U \in \mathscr{F} $, then
			$ T \cap U \in \mathscr{F} $.
		\item If $ T \in \mathscr{F} $, then
			$ S \setminus T \in \mathscr{F} $.
	\end{enumerate}

	Equivalently, $ \mathscr{F} \subseteq P(S) $ is
	a finitely additive measure if and only if
	$ \mathscr{F} = \mu^{-1}\{1\} $ for some map
	$ \mu \colon P(S) \to \{0, 1\} $
	satisfying the following.
	\begin{enumerate}
		\item $ \mu(S) = 1 $.
		\item For every family $ T_1, \dots, T_n $
			of pairwise disjoint subsets of $ S $,
			one has
			\[
				\mu(T_1 \coproduct
				\cdots
				\coproduct T_n) = 
				\mu(T_1) +
				\cdots
				+ \mu(T_n) \period
			\]
	\end{enumerate}
\end{definition}

\begin{construction}
	Let $ S $ be a set.
	Let $ m(S) $ be the set of
	finitely additive measures on $ S $.

	Attached to an ultrafilter $ \mu $ on $ S $ is 
	the collection $ \mathscr{F}_{\mu} $ of $ \mu $-thick subsets.
	In the other direction,
	attached to a finitely additive measure $ \mathscr{F} $ 
	is the ultrafilter $\mu_{\mathscr{F}}$ that
	carries a finite set $ I $ and a map $ f \colon S \to I $
	to the unique element $ i = \int_S f \ d \mu \in I $
	such that $ S_i \in \mathscr{F}$.
	The assignments $ \mu \mapsto \mathscr{F}_{\mu} $ and
	$ \mathscr{F} \mapsto \mu_{\mathscr{F}} $
	together define a bijection $ \beta(S) \cong m(S) $.
\end{construction}

\begin{eg}
	Let $ T \subseteq S $ be a subset.
	Then the inclusion induces an inclusion
	$ \beta(T) \inclusion \beta(S) $
	that identifies ultrafilters on $ T $ with
	ultrafilters on $ S $ relative to which
	$ T $ is thick.
\end{eg}

\begin{definition}
	Let $ S $ be a set, and let $ \mathscr{G} \subseteq P(S) $.
	We say that $ \mathscr{G} $ has the
	\defn{finite intersection property} if and only if
	no finite intersection of elements of $ \mathscr{G} $
	is empty.

	An ultrafilter $ \mu $ on $ S $ is said to be
	\defn{supported on $ \mathscr{G} $} if and only if
	every element of $ \mathscr{G} $ is $ \mu $-thick,
	that is, $ \mathscr{G} \subseteq \mathscr{F}_{\mu} $.
\end{definition}

\begin{eg}
	Let $ \mu $ be an ultrafilter on $ S $.
	Since $ \mu $-thick subsets are closed under
	finite intersections,
	if $ \mathscr{G} \subseteq P(S) $ is a finite collection,
	then $ \mu $ is supported on $ \mathscr{G} $
	if and only if it is supported on
	the intersection of the elements of $ \mathscr{G} $.
	In other words, the set
	$ \beta(T_1 \cap \cdots \cap T_n) $ is naturally identified with
	the set of ultrafilters on $ S $ that are 
	supported on $ \{T_1, \ldots, T_n\} $.

	Thus the notion of an ultrafilter supported
	on a family $ \mathscr{G} \subseteq P(S) $
	is really only interesting if $ \mathscr{G} $ is infinite.
\end{eg}

If there exists an ultrafilter supported on $ \mathscr{G} $,
then certainly $ \mathscr{G} $ has the finite intersection property.
We now prove that the converse is true, and 
this will provide us with a good supply of ultrafilters
on an infinite set.

\begin{lemma}%
	\label{lem:generateultrafilters}
	Let $ S $ be a set, and let $ \mathscr{G} \subseteq P(S) $
	be a family that has the finite intersection property.
	Then there exists an ultrafilter on $ S $
	supported on $ \mathscr{G} $.
\end{lemma}

\begin{proof}
	Consider the families $ \mathscr{F} \subseteq P(S) $
	that contain $ \mathscr{G} $ and
	have the finite intersection property.
	By Zorn's lemma there is a maximal such family, $ \mathscr{F} $.
	We claim that $ \mathscr{F} $ is a finitely additive measure.
	
	Let $ S = S_1 \coproduct \cdots \coproduct S_n $
	be a finite partition of $ S $.
	The finite intersection property ensures that
	at most one of the summands $ S_i $ lies in $ \mathscr{F} $.
	
	Now suppose that
	none of the summands $ S_i $ lies in $ \mathscr{F} $.
	Consider, for each $ i $,
	the family $ \mathscr{F} \cup \{ S_i \} \subseteq P(S) $;
	the maximality of $ \mathscr{F} $ implies that
	this family fails to have the finite intersection property. 
	Thus for each $ i $, there is a finite intersection
	$ T_i = T_{i1} \cap \cdots \cap T_{im_i} $
	of elements of $ \mathscr{F} $ such that 
	\[
		S_i \cap T_i = \emptyset \period
	\]
	But this implies that
	\[
		T_1 \cap \cdots \cap T_n = 
		T_{11} \cap \cdots \cap T_{1m_1} \cap
		\cdots
		T_{n1} \cap \cdots \cap T_{nm_n}
		= \emptyset \comma
	\]
	which contradicts the finite intersection property
	for $ \mathscr{F} $ itself.
	Hence one of the $ S_i $ lies in $ \mathscr{F} $.

	Thus $ \mathscr{F} $ is a finitely additive measure. 
\end{proof}

\begin{eg}
	Let $ S $ be an infinite set.
	Let $ \mathscr{G} $ be the collection of
	cofinite subsets of $ S $ −
	those subsets $ T \subseteq S $ such that
	$ S \setminus T $ is finite.
	Since $ \mathscr{G} $ has the finite intersection property,
	it follows that there is an ultrafilter on $ S $
	relative to which 
	every cofinite subset is thick.
	Such an ultrafilter is necessarily nonprincipal.
\end{eg}

\begin{nul}
	It is not quite accurate to say that
	the Axiom of Choice is \emph{necessary}
	to produce nonprincipal ultrafilters, but
	it is true that their existence is
	independent of Zermelo--Fraenkel set theory.
\end{nul}

\begin{nul}
	What colimits does $ \beta $ preserve?
	We can easily rule out the possibility that
	$ \beta $ preserves arbitrary coproducts:
	if $ S $ is an infinite set, then
	we have seen that $ \beta(S) \neq S $, but
	on the other hand
	\[
		\coprod_{s \in S} \beta(\{s\}) =
		\coprod_{s \in S} \{s\} = S \period
	\]

	On the other hand, $ \beta $ does preserve finite coproducts:
	if $ \mu $ is an ultrafilter on
	$ S = S_1 \sqcup \cdots \sqcup S_n $,
	then $ \mu $ is supported on
	exactly one of the summands $ S_i $.
	Thus $ \mu $ is induced by a unique ultrafilter
	on this summand $ S_i $.
	Consequently, the natural map
	\[
		\beta(S_1) \sqcup \cdots \sqcup \beta(S_n) \to \beta(S)
	\]
	is a bijection.

	Since all coequalizers in $ \Set $ are split ($ \ac $),
	it follows that any functor out of $ \Set $ preserves them.
	We thus conclude:
\end{nul}

\begin{proposition}%
	\label{prp:betapreservesfinitecolimits}
	The functor $ \beta \colon \Set^V \to \Set^V $
	preserves finite colimits.
\end{proposition}

\begin{eg}
	Let $ S $ be a set, and let $ R \parallelto S $
	be an equivalence relation.
	Applying $ \beta $, we obtain a relation
	$ \beta(R) \parallelto \beta(S) $, which induces
	the natural bijection
	$ \beta(S)/\beta(R) \equivalence \beta(S/R) $.
	Let us try to understand the relation $ \beta(R) $
	in explicit terms.
	
	Let $ \mu $ and $ \nu $ be ultrafilters on $ S $.
	Let us write $ \mu R \nu $ if
	the pair $ (\mu, \nu) \in \beta(S) \times \beta(S) $
	lies in the image of $ \beta(R) $.
	Thus $ \mu R \nu $ if and only if
	there exists an ultrafilter $ \tau $ on $ R $
	such that:
	\begin{itemize}
		\item for any $ \mu $-thick subset $ U \subseteq S $,
			the set $ (U \times S) \cap R $
			is $ \tau $-thick, and
		\item for any $ \nu $-thick subset $ V \subseteq S $,
			the set $ (S \times V) \cap R $
			is $ \tau $-thick.
	\end{itemize}
	Combining these conditions, we see that
	$ \mu R \nu $ if and only if
	there exists an ultrafilter $ \tau $ on $ R $
	supported on the family
	\[
		\mathscr{G} \coloneq
			\{ (U \times V) \cap R :
			(U \in \mathscr{F}_{\mu})
			\wedge (V \in \mathscr{F}_{\nu}) \} \period
	\]
	
	By Lemma \ref{lem:generateultrafilters},
	$ \mu R \nu $ if and only if
	$ \mathscr{G} $ enjoys the finite intersection property.
	Since $ \mathscr{F}_{\mu} $ and $ \mathscr{F}_{\nu} $
	are closed under finite intersection,
	so is $ \mathscr{G} $.
	So $ \mu R \nu $ if and only if
	$ \mathscr{G} $ does not contain the empty set,
	which in turn holds if and only if,
	for every $ \mu $-thick $ U \subseteq S $ and
	every $ \nu $-thick $ V \subseteq S $,
	we have $ (U \times V) \cap R \neq \emptyset $.

	For any subset $ W \subseteq S $,
	let us write $ \overline{W} \subseteq S $
	for the saturation of $ W $
	under the equivalence relation $ R $.
	We have shown that $ \mu R \nu $ if and only if
	for every $ \mu $-thick subset $ U \subseteq S $
	and every $ \nu $-thick subset $ V \subseteq S $,
	the set $ \overline{U} \cap V \neq \emptyset $,
	or equivalently, $ U \cap \overline{V} \neq \emptyset $.

	Using the observation of Example \ref{eg:thicknesscriterion},
	we conclude that the following are equivalent:
	\begin{enumerate}
		\item $ \mu R \nu $;
		\item the saturation of every $ \mu $-thick subset
			is $ \nu $-thick;
		\item the saturation of every $ \nu $-thick subset
			is $ \mu $-thick;
		\item a saturated subset is $ \mu $-thick if and only if
			it is $ \nu $-thick;
		\item $ \mu $ and $ \nu $ induce the same ultrafilter
			on $ S/R $.
	\end{enumerate}
\end{eg}

\begin{nul}
	What \emph{limits} does $ \beta $ preserve?
	As it happens, not very many.

	Clearly $ \beta $ preserves the terminal object.
	If $ S $ and $ T $ are sets, then
	we can contemplate the natural map
	$ (\pr_{1,\ast},\pr_{2,\ast}) \colon
	\beta(S \times T) \to \beta(S) \times \beta(T) $.
	If $ \mu $ is an ultrafilter on $ S $,
	and $ \nu $ is an ultrafilter on $ T $,
	then the fiber of this map over $ (\mu,\nu) $
	is the set of those ultrafilters $ \tau $
	on $ S \times T $ such that
	\[
		\pr_{1,\ast}\tau = \mu \andeq
		\pr_{2,\ast}\tau = \nu \period
	\]
	These fibers are exactly the ultrafilters supported on
	\[
		\mathscr{G} \coloneq
			\{ U \times V :
			(U \in \mathscr{F}_{\mu})
			\wedge (V \in \mathscr{F}_{\nu}) \} \period
	\]
	Since $ \mathscr{G} $ enjoys the finite intersection property,
	this fiber is certainly nonempty.

	Let us construct two ultrafilters supported on $ \mathscr{G} $.
	\begin{enumerate}
		\item We have an ultrafilter $ \mu \ltimes \nu $,
			which is defined by the formula
			\[
			\int_{X \times Y} f\ d(\mu \ltimes \nu) =
			\int_{x \in X} \int_{y \in Y}
			f(x, y)\ d\nu\ d\mu \period
			\]
			A subset $ W \subseteq X \times Y $ is
			$ \mu \ltimes \nu $-thick if and only if 
			\[
			\left\{ x \in X :
			\{ y \in Y : (x,y) \in W \}
			\in \mathscr{F}_{\nu} \right\}
			\in \mathscr{F}_{\mu} \period
			\]
		\item We can also exchange the order 
			of integration in this formula.
			This results in an ultrafilter
			$ \mu \rtimes \nu $ given by
			the formula
			\[
			\int_{X \times Y} f\ d(\mu \rtimes \nu) =
			\int_{y \in Y} \int_{x \in X}
			f(x, y)\ d\mu\ d\nu \period
			\]
			A subset $ W \subseteq X \times Y $ is
			$ \mu \rtimes \nu $-thick if and only if 
			\[
			\left\{ y \in Y :
			\{ x \in X : (x,y) \in W \}
			\in \mathscr{F}_{\mu} \right\}
			\in \mathscr{F}_{\nu} \period
			\]
	\end{enumerate}
	
	If one of $ \mu $ or $ \nu $ is a principal ultrafilter,
	then $ \mu \ltimes \nu = \mu \rtimes \nu $,
	but in general these two are distinct.
	Indeed, let $ \mu, \nu \in \beta(\NN) $ be
	two non-principal ultrafilters.
	Then the set $ \{ (x,y) \in \NN \times \NN : x < y \} $
	is $ (\mu \ltimes \nu) $-thick but $ (\mu \rtimes \nu) $-thin,
	whereas the set $ \{ (x,y) \in \NN \times \NN : x > y \} $
	is $ (\mu \ltimes \nu) $-thin but $ (\mu \rtimes \nu) $-thick.

	From this, we deduce that $ \beta $ does not preserve
	products or pullbacks in general.
\end{nul}

\begin{construction}
	Let $ \alpha $ be an ordinal number.
	For entirely formal reasons,
	the functor $ \beta \colon \Set_{\alpha} \to \Set_{\alpha} $
	is a monad with unit $ \delta \colon \id \to \beta $.

	To explain this, note that $ \delta $
	restricts to a natural isomorphism
	$ i^{\ast}\delta \colon i \equivalence \beta \circ i $.
	Furthermore, $ \beta $ enjoys the following universal property:
	for every functor
	$ \phi \colon \Set_{\alpha} \to \Set_{\alpha} $,
	every natural transformation
	$ \eta \colon \phi \circ i \to i $,
	extends to a unique natural transformation
	$ \etabar \colon \phi \to \beta $,
	by which we mean that
	$ i^{\ast}\etabar = i^{\ast}\delta \circ \eta $.
	In other words, restriction induces a natural bijection
	\[
		\Map(\phi, \beta) = \Map(\phi \circ i, i) \period
	\]
	
	The identification $ i^{\ast} \delta $ gives rise to an
	identification $ \beta^2 \circ i \equivalence i $,
	which in turn extends uniquely to a natural transformation
	$ \lambda \colon \beta^2 \to \beta $.

	Let's unpack this natural transformation.
	For the sake of brevity, if $ X $ and $ Y $ are sets,
	let us write $ Y^X $ for $ \Map(X,Y) $.
	Let $ X $ be a set, and let $ I $ be a finite set.
	The key operation is the evaluation map
	\[
		\epsilon_X \colon X \to I^{I^X} \period
	\]
	Of course this is the composite
	\[
		\begin{tikzcd}[sep=1.5em]
			X \arrow[r, "\delta_X"] &
			\beta(X) =
			\sqint_{I \in F} I^{I^X} \arrow[r, "\pr_I"] &
			I^{I^X}
		\end{tikzcd}
	\]	
	The map $ \epsilon_X $ induces a map
	\[
		\epsilon_X^{\ast} \colon I^{I^{I^X}} \to I^X \comma
	\]
	and we apply it to the set $ X = I^S $ for a set $ S $.
	This produces a natural map
	\[
		\epsilon_{I^S}^{\ast} \colon
		I^{I^{I^{I^S}}} \to I^{I^S} \period
	\]
	Explicitly, if $ f \colon I^{I^{I^S}} \to I $ is a map,
	then its image under $ \epsilon_{I^S}^{\ast} $ is
	the map $ I^S \to I $
	that carries $ \phi $ to $ f(\epsilon_S(\phi)) $.
	Now the map $ \lambda_S \colon \beta^2(S) \to \beta(S) $ 
	is the composite
	\[
		\begin{tikzcd}[sep=1.5em]
		\beta(\beta(S)) =
		\sqint_{J \in F} J^{J^{\sqint_{I \in F} I^{I^S}}}
		\arrow[r, "c"] &
		\sqint_{J \in F} \sqint_{I \in F} J^{J^{I^{I^S}}}
		\arrow[r, "p"] &
		\sqint_{I \in F} I^{I^{I^{I^S}}}
		\arrow[r, "\sqint_I \epsilon_{I^S}^{\ast}"] &
		\sqint_{I \in F} I^{I^S} = \beta(S) \comma
		\end{tikzcd}
	\]
	where $ c $ and $ p $ are the canonical maps.

	Now let $ \tau $ be an ultrafilter on $ \beta(S) $.
	The induced ultrafilter $ \lambda_S(\tau) $ on $ S $
	is defined so that
	\[
		\int_{S} f \ d\lambda_S(\tau) =
		\int_{\mu \in \beta(S)}
		\left( \int_{S} f \ d\mu \right) 
		d\tau \period
	\]
	Said differently, if $ T \subseteq S $ is a subset,
	then the induced map $ \beta(T) \to \beta(S) $
	identifies $ \beta(T) $ with
	the set of ultrafilters on $ S $ supported on $ \{T\} $, and
	the ultrafilter $ \lambda(\tau) $ on $ S $
	is defined so that  
	\[
		\lambda(\tau)(T) = \tau(\beta(T)) \period
	\]
\end{construction}

%-------------------------------------------------------------------%
\subsection{Completeness of ultrafilters}%
\label{sub:completeness_of_ultrafilters}
%-------------------------------------------------------------------%

%-------------------------------------------------------------------%
\subsection{Ultrafilters on posets}%
\label{sub:ultrafilters_on_posets}
%-------------------------------------------------------------------%

%-------------------------------------------------------------------%
\subsection{Ultraproducts}%
\label{sub:ultraproducts}
%-------------------------------------------------------------------%




